{% extends "base.html" %}

{% block title %}Warehouse App - Home{% endblock %}

{% block content %}
<div class="container">
    <h1>Warehouse Management</h1>
    <p>Manage your storages below.</p>

    {% if varastot %}
    <ul class="storage-list">
        {% for id, data in varastot.items() %}
        <li class="storage-item">
            <div class="storage-info">
                <strong>{{ data.name }}</strong>
                <div>{{ data.varasto }}</div>
                <div class="progress-bar">
                    {% set percentage = (data.varasto.saldo / data.varasto.tilavuus * 100) if data.varasto.tilavuus > 0 else 0 %}
                    <div class="progress-fill" style="width: {{ percentage }}%"></div>
                </div>
            </div>
            <div class="storage-actions">
                <a href="{{ url_for('view', varasto_id=id) }}" class="btn">View</a>
                <form action="{{ url_for('delete', varasto_id=id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this storage?')">Delete</button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>No storages created yet. <a href="{{ url_for('create') }}">Create one now!</a></p>
    {% endif %}
</div>
{% endblock %}
